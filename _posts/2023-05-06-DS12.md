---
layout : single
author_profile: true
sidebar: 
  nav: "sidebar-category"

title: "[자료구조] 탐색트리 -4"

categories:
  - ds
tags:
  - DS
  - 자료구조
---


**본문과 관련하여 실습한 전체코드는 리파지토리에 별도 작성하였습니다.**<br>
: https://github.com/ejImDev/data_structure_study.git<br><br>


## AVL트리 삽입연산
- AVL트리에서 삽입은 2단계로 수행<br>
	1. 이진탐색트리의 삽입과 동일하게 새로운 노드 삽입<br>
	2. 새로 삽입한 노드부터 루트로 거슬러 올라가며 각 노드의 서브트리 높이 차이를 갱신 <br>
		- 이때 가장 먼저 불균형이 발생한 노드를 발견하면, 이 노드를 기준으로 새 노드가 어디에 삽입되었는지에 따라 적절한 회전연산을 수행<br><br>

1. AVL 트리 Node 클래스<br>
``` java
public class Node {
	private Key id;
	private Value name;
	private int height;
	private Node left, right;
	public Node(Key newID, Value newName, int newHt) {
		id = newID;
		name = newName;
		height = newHt;
		left = right = null;
	}
}
```

2. 삽입 연산<br>
``` java
public void put(Key k, Value v) { root = put(root, k, v); }
private Node put(Node n, Key k, Value v) {
	if(n==null) {
		return new Node(k, v, 1);
	}
	int i = k.compareTo(n.id);
	if(t<0) {
		n.left = put(n.left, k, v);
	} else if (t>0) {
		n.right = put(n.right, k, v);
	} else {
		n.name = v;
		return n;
	}
	n.height = tallerHeight(height(n.left), height(n.right))+1;
	return balance(n);
}
```

3. 회전연산 수행 메소드<br>
``` java
private Node balance(Node n) {
	if(bf(n)>1) {
		if(bf(n.left)<0) {
			n.left = rotateLeft(n.left);
		}
		n = rotateRight(n);
	} else if (bf(n)<-1) {
		if(bf(n.right)>0) {
			n.right = rotateRight(n.right);
		}
		n.rotateLeft(n);
	}
	return n;
}
```

4. 삽입연산에 사용되는 메소드<br>
- 좌우 노드 높이차 계산<br>
``` java
private int bf(Node n) {
	return height(n.left) - height(n.right);
}
``` 

- 지정노드 높이 계산<br>
``` java
private int height(Node n) {
	if(n==null) { return 0; }
	return n.height;
}
```

- 지정노드 중 더 깊은노드 찾기<br>
``` java
private int tallerHeight(int x, int y) {
	if(x>y) { return x; }
	else { return y; }
}
```

## AVL트리 삭제 연산
- AVL트리에서 삭제는 2단계로 진행<br>
	1. 이진탐색트리에서와 동일한 삭제 연산 수행<br>
	2. 삭제된 노드로부터 루트노드 방향으로 거슬러 올라가며 불균형이 발생한 경우 적절한 회전연산 수행<br>
		- 회전연산 수행 후에 부모노드에서 불균형이 발생할 수 있고, 이러한 일이 반복되어 루트노드에서 회전연산을 수행해야 하는 경우도 발생<br><br>

> 참고 자료 : '경기대학교 소프트웨어중심대학사업단 - JAVA 자료구조' https://youtu.be/uoIdKPjaRDQ
